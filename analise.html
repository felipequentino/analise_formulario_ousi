<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="João F. Quentino">

<title>Análise de dados do formulário do Óusi</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="analise_files/libs/clipboard/clipboard.min.js"></script>
<script src="analise_files/libs/quarto-html/quarto.js"></script>
<script src="analise_files/libs/quarto-html/popper.min.js"></script>
<script src="analise_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="analise_files/libs/quarto-html/anchor.min.js"></script>
<link href="analise_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="analise_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="analise_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="analise_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="analise_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Análise de dados do formulário do Óusi</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>João F. Quentino </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p>Essa é uma análise do formulário que recebemos do Óusi, onde teve 1751 respostas. A partir dele, realizei verificações em cima dos dados, a fim de obter conhecimento sobre nosso público alvo.</p>
<section id="vemos-que-a-grande-maioria-das-respostas-são-de-moradores-de-prédios-64.8-do-total-1.751" class="level3">
<h3 class="anchored" data-anchor-id="vemos-que-a-grande-maioria-das-respostas-são-de-moradores-de-prédios-64.8-do-total-1.751">Vemos que, a grande maioria das respostas são de moradores de prédios (64.8% do total (1.751))</h3>
<div id="578e30ab" class="cell" data-execution_count="3">
<div class="cell-output cell-output-stdout">
<pre><code>Respostas de moradores de Prédios = 1136
Respostas de moradores de Casas   = 572
Respostas de segurança de Prédios = 29
Respostas de segurança de Prédios = 12</code></pre>
</div>
</div>
<div id="1edcccd7" class="cell" data-execution_count="4">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analise_files/figure-html/cell-5-output-1.png" width="601" height="450" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="1ba69196" class="cell" data-execution_count="5">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analise_files/figure-html/cell-6-output-1.png" width="601" height="615" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="a-média-de-segurança-é-3-intervalo-1-5" class="level2">
<h2 class="anchored" data-anchor-id="a-média-de-segurança-é-3-intervalo-1-5">A média de segurança é 3 (intervalo = 1-5)</h2>
<section id="tanto-nos-condomínios-de-casas-quanto-nos-condomínios-de-prédios-tanto-do-ponto-de-vista-de-um-morador-quanto-do-de-um-segurança-o-valor-médio-é-de-3-exceto-pelos-seguranças-que-trabalham-em-prédios-que-a-média-foi-4." class="level3">
<h3 class="anchored" data-anchor-id="tanto-nos-condomínios-de-casas-quanto-nos-condomínios-de-prédios-tanto-do-ponto-de-vista-de-um-morador-quanto-do-de-um-segurança-o-valor-médio-é-de-3-exceto-pelos-seguranças-que-trabalham-em-prédios-que-a-média-foi-4.">Tanto nos condomínios de casas, quanto nos condomínios de prédios, tanto do ponto de vista de um morador, quanto do de um segurança, o valor médio é de 3, exceto pelos seguranças que trabalham em prédios, que a média foi 4.</h3>
<div id="9e31b07b" class="cell" data-execution_count="6">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analise_files/figure-html/cell-7-output-1.png" width="823" height="656" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="hipótese-dado-um-condomínio-de-baixa-segurança-1-2-há-uma-ocorrência-maior-de-problemas-dentro-do-condomínio" class="level2">
<h2 class="anchored" data-anchor-id="hipótese-dado-um-condomínio-de-baixa-segurança-1-2-há-uma-ocorrência-maior-de-problemas-dentro-do-condomínio">Hipótese: dado um condomínio de baixa segurança (1-2), há uma ocorrência maior de problemas dentro do condomínio?</h2>
<section id="primeiramente-vamos-analisar-as-respostas-por-nível-de-segurança" class="level3">
<h3 class="anchored" data-anchor-id="primeiramente-vamos-analisar-as-respostas-por-nível-de-segurança">Primeiramente, vamos analisar as respostas por nível de segurança:</h3>
<div id="6a199964" class="cell" data-execution_count="8">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analise_files/figure-html/cell-9-output-1.png" width="612" height="631" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="87a504fa" class="cell" data-execution_count="9">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analise_files/figure-html/cell-10-output-1.png" width="687" height="631" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="podemos-observar-que-a-maioria-das-respostas-foi-de-pessoas-que-dizem-que-seu-condomínio-tem-uma-segurança-nível-4.-a-partir-disso-separei-entre-baixa-segurança-1-2-média-segurança-3-e-alta-segurança-4-5." class="level3">
<h3 class="anchored" data-anchor-id="podemos-observar-que-a-maioria-das-respostas-foi-de-pessoas-que-dizem-que-seu-condomínio-tem-uma-segurança-nível-4.-a-partir-disso-separei-entre-baixa-segurança-1-2-média-segurança-3-e-alta-segurança-4-5.">Podemos observar que, a maioria das respostas foi de pessoas que dizem que seu condomínio tem uma segurança nível 4. A partir disso, separei entre baixa segurança (1-2), média segurança (3) e alta segurança (4-5).</h3>
</section>
<section id="a-partir-disso-podemos-perceber-que-23.7-das-respostas-são-de-pessoas-que-moram-em-condomínios-com-baixa-segurança-agora-vamos-para-as-contagens-dos-problemas" class="level3">
<h3 class="anchored" data-anchor-id="a-partir-disso-podemos-perceber-que-23.7-das-respostas-são-de-pessoas-que-moram-em-condomínios-com-baixa-segurança-agora-vamos-para-as-contagens-dos-problemas">A partir disso, podemos perceber que 23.7% das respostas são de pessoas que moram em condomínios com baixa segurança, agora vamos para as contagens dos problemas:</h3>
<div id="0428e606" class="cell" data-execution_count="10">
<div class="cell-output cell-output-stdout">
<pre><code>Quantidade de problemas em condomínios de baixa segurança de casas =  49
Quantidade de problemas em condomínios de baixa segurança de prédios =  147

Quantidade de problemas em condomínios de média segurança de casas =  54
Quantidade de problemas em condomínios de média segurança de prédios =  103

Quantidade de problemas em condomínios de alta segurança de casas =  33
Quantidade de problemas em condomínios de alta segurança de prédios =  84</code></pre>
</div>
</div>
</section>
</section>
<section id="por-mais-que-condomínios-de-baixa-segurança-equivalam-a-apenas-23.7-das-respostas-elas-foram-a-que-mais-tiveram-problemas-em-condomínios-de-prédios-de-forma-esmagadora.-e-um-número-alto-também-de-problemas-em-condomínios-de-casas" class="level2">
<h2 class="anchored" data-anchor-id="por-mais-que-condomínios-de-baixa-segurança-equivalam-a-apenas-23.7-das-respostas-elas-foram-a-que-mais-tiveram-problemas-em-condomínios-de-prédios-de-forma-esmagadora.-e-um-número-alto-também-de-problemas-em-condomínios-de-casas">Por mais que condomínios de baixa segurança equivalam a apenas 23.7% das respostas, elas foram a que mais tiveram problemas em condomínios de prédios, de forma esmagadora. E um número alto também de problemas em condomínios de casas</h2>
<section id="é-importante-ressaltar-também-que-em-condomínio-de-alta-segurança-também-há-vários-problemas-não-tanto-quanto-os-de-média-e-baixa-segurança-mas-há-sim-problemas" class="level3">
<h3 class="anchored" data-anchor-id="é-importante-ressaltar-também-que-em-condomínio-de-alta-segurança-também-há-vários-problemas-não-tanto-quanto-os-de-média-e-baixa-segurança-mas-há-sim-problemas">É importante ressaltar também que, em condomínio de alta segurança também há vários problemas, não tanto quanto os de média e baixa segurança, mas há sim problemas!</h3>
</section>
</section>
<section id="vamos-a-alguns-relatos" class="level1">
<h1>Vamos a alguns relatos:</h1>
<section id="relatos-de-problemas-de-prédios" class="level3">
<h3 class="anchored" data-anchor-id="relatos-de-problemas-de-prédios">Relatos de problemas de Prédios:</h3>
<ul>
<li>“Invasão por vândalos, ladrões de motos.”</li>
<li>“Pessoas entram junto com moradores e passam despercebidas. Já meu pai, morador idoso, ficou na madrugada proibido de entrar e o mandaram tentar no condomínio vizinho (o sistema com nome dos moradores estava fora do ar e o porteiro da madrugada não o conhecia). Visitantes/convidados já furtaram objetos de moradores nas áreas comuns.”</li>
<li>“O porteiro do meu prédio, deu confiança a Namorado da minha inquilina e deixou ele subir sem ser anunciado, o rapaz ao subir agredido a menina fisicamente, moralmente se não fosse os vizinhos ele tinha matado a Garota.”</li>
<li>“Pessoas passaram pela portaria se dizendo parentes de morador q nao estava. Disseram que tinham a chave. Os porteiros liberaram acesso. Furtaram um apto em outro andar di que o indicado, mediante arrombamento. Sairam do condominio normalmente, pela portaria.”</li>
<li>“Roubo homem aranha” (seja lá o que isso significa…)</li>
</ul>
</section>
<section id="relatos-de-problemas-de-casas" class="level3">
<h3 class="anchored" data-anchor-id="relatos-de-problemas-de-casas">Relatos de problemas de casas</h3>
<ul>
<li>“Meus pais tb moram no condomínio, são idosos eu moro na frente da casa deles.Meu pai estava sozinho na casa ele deixou entrar um rapaz dizendo que era do banco, levou o cartão dele. Meu pai estava sozinho no momento. Quando eu e minha mãe chegamos ele nos contou na mesma hora fomos fazer um boletim de ocorrência e liguei no app do banco para bloquear o cartão.”</li>
<li>“Bandidos renderam morador entraram e saíram na maior. Outro caso ele entraram por cima e foram direto na casa do morador.”</li>
<li>“O condomínio foi invadido e 3 casas foram assaltadas. Depois disso foi necessário rever todo esquema de segurança.”</li>
<li>“Adentraram dentro do condomínio, através dos muros laterais e furtaram 3 casas.””</li>
<li>“Roubo de moveis de picina.” (se eu soubesse, daria um desconto de 15% na JF Móveis para a compra dos novos móveis da área gourmet.)</li>
</ul>
</section>
<section id="todos-esses-relatos-são-de-supostos-condomínios-de-alta-segurança" class="level2">
<h2 class="anchored" data-anchor-id="todos-esses-relatos-são-de-supostos-condomínios-de-alta-segurança">TODOS esses relatos são de SUPOSTOS condomínios de alta segurança!</h2>
<div id="5db9d255" class="cell" data-execution_count="11">
<div class="cell-output cell-output-stderr">
<pre><code>[nltk_data] Downloading package stopwords to
[nltk_data]     /home/felipequentino/nltk_data...
[nltk_data]   Package stopwords is already up-to-date!</code></pre>
</div>
</div>
<section id="para-finalizar-segue-uma-nuvem-de-palavra-das-palavras-mais-comuns-nas-descrições-dos-problemas-de-casas-e-de-pŕedios-respectivamente" class="level3">
<h3 class="anchored" data-anchor-id="para-finalizar-segue-uma-nuvem-de-palavra-das-palavras-mais-comuns-nas-descrições-dos-problemas-de-casas-e-de-pŕedios-respectivamente">Para finalizar, segue uma nuvem de palavra das palavras mais comuns nas descrições dos problemas de Casas e de Pŕedios, respectivamente</h3>
<div id="fdc0f326" class="cell" data-execution_count="12">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analise_files/figure-html/cell-13-output-1.png" width="1128" height="594" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="5de23ea6" class="cell" data-execution_count="13">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analise_files/figure-html/cell-14-output-1.png" width="1128" height="595" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>